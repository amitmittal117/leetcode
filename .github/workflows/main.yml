name: Update leetCode files

on:
  schedule:
    - cron: "0 9 * * *"  # Runs daily at 9 AM UTC
  workflow_dispatch:

jobs:
  random_python_commit:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Pick a random Python file and modify it
        run: |
          PY_FILES=$(find . -type f -name "*.py" ! -path "./.git/*" ! -path "./.github/*")
          if [ -z "$PY_FILES" ]; then
            echo "No Python files found."
            exit 0
          fi
          
          FILE=$(echo "$PY_FILES" | shuf -n 1)
          echo "Selected file: $FILE"

          TMP_FILE=$(mktemp)
          BASENAME=$(basename "$FILE")
          echo "# $BASENAME" > "$TMP_FILE"
          cat "$FILE" >> "$TMP_FILE"
          mv "$TMP_FILE" "$FILE"

      - name: Commit and push changes
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add .
          git commit -m "Added comment $(BASENAME)" || echo "No changes to commit"
          git push
